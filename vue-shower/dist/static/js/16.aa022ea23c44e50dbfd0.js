webpackJsonp([16],{"0dLw":function(t,e){},"3vNm":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("fZjL"),o=a.n(l),i=a("28Pe"),s=(a("kzGw"),a("+cKO")),r={name:"GroupRoleManage",data:function(){return{groupRoleList:[],tableDataUrl:"manage/rule",currPageNum:1,totalPage:1,showModalPage:!1,isEditModal:!1,uploadFilePath:"",uploadFile:null,editFormData:{group:"",type:"",file:null,expression:""},addFormData:{group:"",type:"",file:null,expression:""}}},validations:{formData:{group:{required:s.required},type:{required:s.required},file:{required:s.required}}},computed:{formData:function(){return this.isEditModal?this.editFormData:this.addFormData},modalPageTitle:function(){return this.isEditModal?"修改分类规则":"新增分类规则"}},components:{WorkTablePager:i.a},methods:{getTableData:function(t){t&&""!=t?this.currPageNum=t:t=this.currPageNum;var e=this;this.Request({url:this.tableDataUrl,method:"get",params:{page:t,pagesize:10}}).then(function(t){e.totalPage=t.total,e.refreshTableList(t.result)})},refreshTableList:function(t){this.groupRoleList=t},delGroup:function(t){var e=this;this.Request({url:this.tableDataUrl,method:"delete",data:{id:t.id,type:t.type}}).then(function(t){e.Message.success("删除成功"),e.getTableData()})},openAddModal:function(){this.showModalPage=!0,this.isEditModal=!1},openEditModal:function(t){this.showModalPage=!0,this.isEditModal=!0,this.editFormData=t},closeModal:function(){var t=this;this.showModalPage=!1,this.isEditModal=!1,o()(this.formData).forEach(function(e){t.formData[e]=""}),this.uploadFilePath=""},subWordForm:function(){var t=this;if(!this.checkInputNull()){var e=this.addFormData,a=o()(e);if(this.isEditModal){e=this.editFormData,a=o()(e);var l=new FormData;a.forEach(function(t){l.append(t,e[t])}),this.Request({url:this.tableDataUrl,method:"put",data:l}).then(function(e){t.Message.success("保存成功"),t.closeModal(),t.getTableData()})}else{var i=new FormData;a.forEach(function(t){i.append(t,e[t])}),this.Request({url:this.tableDataUrl,method:"post",data:i}).then(function(e){t.Message.success("保存成功"),t.closeModal(),t.getTableData()})}}},fileChange:function(t,e){this.uploadFilePath=t.name;var a=this.uploadFilePath.lastIndexOf("."),l=this.uploadFilePath.substr(a+1);if("txt"!=l&&"html"!=l&&"pdf"!=l&&"doc"!=l&&"docx"!=l&&"xls"!=l&&"xlsx"!=l&&"pptx"!=l&&"eml"!=l)return this.$notify.error("错误的文件类型！目前仅支持：txt、html、pdf、doc、docx、xls、xlsx、pptx、eml"),void(this.uploadFilePath="");this.isEditModal?this.editFormData.file=e[e.length-1].raw:this.addFormData.file=e[e.length-1].raw},downloadFile:function(t){var e=document.createElement("iframe");e.style.display="none",e.src="http://172.26.52.230:8080/service/nlpdownload/rule/"+t,e.onload=function(){document.body.removeChild(e)},document.body.appendChild(e)},checkInputNull:function(){var t=this.$v.$invalid;return t&&this.$notify({dangerouslyUseHTMLString:!0,message:'<span style="font-size:15px;color:red;font-weight: bold">以下参数不允许为空</span><br>分类组、分类名称、分类规则文件'}),t}},mounted:function(){this.getTableData(1)}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{headerItems:["系统管理","分类规则管理"]}},[a("el-row",{staticClass:"search-row",attrs:{gutter:20}},[a("el-col",{staticClass:"align-left",attrs:{span:17}},[a("el-button",{attrs:{type:"primary"},on:{click:t.openAddModal}},[t._v("新增分类规则")])],1)],1),t._v(" "),a("el-row",{staticClass:"table-row"},[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.groupRoleList}},[a("el-table-column",{attrs:{prop:"group",align:"left",label:"分类组"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",align:"left",label:"分类名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"file",align:"left",label:"分类规则文件"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{cursor:"pointer"},on:{click:function(a){t.downloadFile(e.row.file)}}},[a("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.row.file))])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"expression",align:"left",label:"分类规则表达式"}}),t._v(" "),a("el-table-column",{attrs:{prop:"create",align:"left",label:"创建日期"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.delGroup(e.row)}}},[t._v("删除")])]}}])})],1)],1)],1),t._v(" "),a("WorkTablePager",{attrs:{pageCount:t.totalPage},on:{refreshData:t.getTableData}}),t._v(" "),t._m(0),t._v(" "),a("el-dialog",{attrs:{title:t.modalPageTitle,visible:t.showModalPage},on:{"update:visible":function(e){t.showModalPage=e}}},[a("el-form",{staticClass:"modal-form",attrs:{"label-position":t.left,"label-width":"30%",model:t.formData}},[a("el-form-item",{attrs:{label:"分类组"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.formData.group,callback:function(e){t.$set(t.formData,"group",e)},expression:"formData.group"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分类名称"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分类规则表达式"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.formData.expression,callback:function(e){t.$set(t.formData,"expression",e)},expression:"formData.expression"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分类规则文件"}},[a("el-input",{staticClass:"input-with-select",attrs:{disabled:!0,size:"small",placeholder:"请输入文件路径"},model:{value:t.uploadFilePath,callback:function(e){t.uploadFilePath=e},expression:"uploadFilePath"}},[a("el-upload",{ref:"uploadFile",attrs:{slot:"append","auto-upload":!1,"show-file-list":!1,"on-change":t.fileChange},slot:"append"},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer"},[a("span",{staticStyle:{color:"red"}},[t._v("分类规则表达式支持and or not逻辑表达式,支持* ? +正则表达式。例如：通州？and 昌平*")])]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeModal}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.subWordForm()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{width:"0",height:"0"}},[e("a",{staticStyle:{color:"white"},attrs:{href:"javascript:;"}})])}]};var d=a("VU/8")(r,n,!1,function(t){a("0dLw")},"data-v-8b49fe9e",null);e.default=d.exports}});
//# sourceMappingURL=16.aa022ea23c44e50dbfd0.js.map