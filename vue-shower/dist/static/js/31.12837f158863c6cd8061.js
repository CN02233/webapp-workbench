webpackJsonp([31],{"6JmI":function(t,a){},XHhP:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("fZjL"),o=e.n(s),l=e("mvHQ"),r=e.n(l),i=e("28Pe"),n=(e("kzGw"),e("+cKO")),d={name:"DataSourceManage",data:function(){return{dataSourceList:[],tableDataUrl:"manage/datasource",currPageNum:1,showModalPage:!1,isEditModal:!1,editFormData:{db:"",type:"",host:"",user:"",password:""},addFormData:{db:"",type:"",host:"",user:"",password:""}}},validations:{formData:{db:{required:n.required},type:{required:n.required},host:{required:n.required},user:{required:n.required},password:{required:n.required}}},computed:{formData:function(){return this.isEditModal?this.editFormData:this.addFormData},modalPageTitle:function(){return this.isEditModal?"修改数据源":"新增数据源"}},components:{WorkTablePager:i.a},methods:{getTableData:function(t){var a=this;t&&""!=t?this.currPageNum=t:t=this.currPageNum;var e=this;this.Request({url:this.tableDataUrl,params:{page:t,pagesize:10}}).then(function(t){"0"!=t.status?a.Message.error(t.message):e.refreshTableList(t.result)})},refreshTableList:function(t){this.dataSourceList=t},delWord:function(t){var a=this;this.Request({url:this.tableDataUrl,method:"delete",data:{id:t}}).then(function(t){a.Message.success("删除成功"),a.getTableData()})},openAddModal:function(){this.showModalPage=!0,this.isEditModal=!1},openEditModal:function(t){console.log(r()(t)),this.showModalPage=!0,this.isEditModal=!0,this.editFormData=t},closeModal:function(){var t=this;this.showModalPage=!1,this.isEditModal=!1,o()(this.formData).forEach(function(a){t.formData[a]=""})},subWordForm:function(){var t=this;if(!this.checkInputNull()){var a=this.addFormData;this.isEditModal?(a=this.editFormData,this.Request({url:"manage/datasource",method:"put",data:a}).then(function(a){"0"!=a.status?t.Message.error(a.message):(t.Message.success("保存成功"),t.closeModal(),t.getTableData())})):this.Request({url:"manage/datasource",method:"post",data:a}).then(function(a){"0"!=a.status?t.Message.error(a.message):(t.Message.success("保存成功"),t.closeModal(),t.getTableData())})}},checkInputNull:function(){var t=this.$v.$invalid;return t&&this.$notify({dangerouslyUseHTMLString:!0,message:'<span style="font-size:15px;color:red;font-weight: bold">以下参数不允许为空</span><br>数据源名称、数据源类型、数据源地址、用户名、密码'}),t}},mounted:function(){this.dataSourceList=[],this.getTableData(1)}},u={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{headerItems:["系统管理","数据源管理"]}},[e("el-row",{staticClass:"search-row",attrs:{gutter:20}},[e("el-col",{staticClass:"align-left",attrs:{span:17}},[e("el-button",{attrs:{type:"primary"},on:{click:t.openAddModal}},[t._v("新增数据源")])],1)],1),t._v(" "),e("el-row",{staticClass:"table-row"},[e("el-col",{attrs:{span:24}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dataSourceList}},[e("el-table-column",{attrs:{prop:"db",align:"left",label:"数据源名称"}}),t._v(" "),e("el-table-column",{attrs:{prop:"type",align:"left",label:"数据库类型"}}),t._v(" "),e("el-table-column",{attrs:{prop:"host",align:"left",label:"服务器地址"}}),t._v(" "),e("el-table-column",{attrs:{prop:"user",align:"left",label:"用户名"}}),t._v(" "),e("el-table-column",{attrs:{prop:"password",align:"left",label:"密码"}}),t._v(" "),e("el-table-column",{attrs:{label:"操作",align:"left"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.openEditModal(a.row)}}},[t._v("编辑")]),t._v(" "),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.delWord(a.row.id)}}},[t._v("删除")])]}}])})],1)],1)],1),t._v(" "),e("WorkTablePager",{attrs:{pageCount:t.totalPage},on:{refreshData:t.getTableData}}),t._v(" "),e("el-dialog",{attrs:{title:t.modalPageTitle,visible:t.showModalPage},on:{"update:visible":function(a){t.showModalPage=a}}},[e("el-form",{staticClass:"modal-form",attrs:{"label-position":t.left,"label-width":"20%",model:t.formData}},[e("el-form-item",{attrs:{label:"数据源名称"}},[e("el-input",{attrs:{"auto-complete":"off"},model:{value:t.formData.db,callback:function(a){t.$set(t.formData,"db",a)},expression:"formData.db"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"数据源类型"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择数据源类型"},model:{value:t.formData.type,callback:function(a){t.$set(t.formData,"type",a)},expression:"formData.type"}},[e("el-option",{attrs:{label:"mysql",value:"mysql"}})],1)],1),t._v(" "),e("el-form-item",{attrs:{label:"数据源地址"}},[e("el-input",{attrs:{"auto-complete":"off"},model:{value:t.formData.host,callback:function(a){t.$set(t.formData,"host",a)},expression:"formData.host"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"用户名"}},[e("el-input",{attrs:{"auto-complete":"off"},model:{value:t.formData.user,callback:function(a){t.$set(t.formData,"user",a)},expression:"formData.user"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"密码"}},[e("el-input",{attrs:{"auto-complete":"off"},model:{value:t.formData.password,callback:function(a){t.$set(t.formData,"password",a)},expression:"formData.password"}})],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.closeModal}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.subWordForm()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=e("VU/8")(d,u,!1,function(t){e("6JmI")},"data-v-5db7a61d",null);a.default=c.exports}});
//# sourceMappingURL=31.12837f158863c6cd8061.js.map