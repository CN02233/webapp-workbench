webpackJsonp([5],{WBAa:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l,o=a("fZjL"),r=a.n(o),i=a("bOdI"),s=a.n(i),n=a("28Pe"),d=(a("kzGw"),a("+cKO")),c={name:"SensitiveWordRule",data:function(){return{wordDataList:[],seg:"",tableDataUrl:"rulelist",ruledictList:{},currPageNum:1,totalPage:1,showModalPage:!1,isEditModal:!1,editFormData:{description:"",match:"",relation:"",enabled:"",total:""},addFormData:{description:"",match:"",relation:"",enabled:"",total:""}}},validations:{formData:(l={description:{required:d.required},match:{required:d.required},relation:{required:d.required}},s()(l,"description",{required:d.required}),s()(l,"total",{required:d.required}),l)},computed:{formData:function(){return this.isEditModal?this.editFormData:this.addFormData},modalPageTitle:function(){return this.isEditModal?"修改规则":"新增规则"}},components:{WorkTablePager:n.a},methods:{getTableData:function(t){t&&""!=t?this.currPageNum=t:t=this.currPageNum;var e=this;this.BaseRequest({url:this.tableDataUrl,method:"get",params:{pageindx:t,pagenums:10,seg:this.seg||""}}).then(function(t){e.totalPage=parseInt(t.pagecount||1),e.refreshTableList(t.dataList),t.dataList&&t.dataList.forEach(function(t){var a=t.relation,l=t.match,o=t.enabled,r=t.description;e.ruledictList.relation.forEach(function(e){var l=e.name;e.value===a&&(t.relationCN=l)}),e.ruledictList.description.forEach(function(e){var a=e.name;e.value===r&&(t.descriptionCN=a)}),e.ruledictList.match.forEach(function(e){var a=e.name;e.value===l&&(t.matchCN=a)}),t.enabledCN="true"===o?"是":"否"})})},refreshTableList:function(t){this.wordDataList=t},delWord:function(t){var e=this;this.BaseRequest({url:"rulelist",method:"delete",data:{id:t}}).then(function(t){"0"==t.status?e.Message.success("删除成功"):e.Message.error(t.msg),e.getTableData()})},openAddModal:function(){this.showModalPage=!0,this.isEditModal=!1},openEditModal:function(t){this.showModalPage=!0,this.isEditModal=!0,this.editFormData=t},closeModal:function(){var t=this;this.showModalPage=!1,this.isEditModal=!1,r()(this.formData).forEach(function(e){t.formData[e]=""})},subWordForm:function(){var t=this;if(!this.checkInputNull()){var e=this.addFormData;this.isEditModal?(e=this.editFormData,this.BaseRequest({url:"rulelist",method:"put",data:e}).then(function(e){"0"==e.status?t.Message.success("保存成功"):t.Message.error(e.msg),t.getTableData(),t.closeModal()})):(e.id="",this.BaseRequest({url:"rulelist",method:"put",data:e}).then(function(e){"0"==e.status?t.Message.success("保存成功"):t.Message.error("保存失败"),t.getTableData(),t.closeModal()}))}},checkInputNull:function(){var t=this.$v.$invalid;return t&&this.$notify({dangerouslyUseHTMLString:!0,message:'<span style="font-size:15px;color:red;font-weight: bold">以下参数不允许为空</span><br>规则描述、关系、出现次数、关联'}),t},ruleDesChange:function(t){this.formData.total="0"===t?"敏感词频率":""}},mounted:function(){var t=this;this.wordDataList=[],this.BaseRequest({url:"ruledict",method:"get"}).then(function(e){t.ruledictList=e,t.getTableData(1)})}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{headerItems:["系统管理","敏感词库规则"]}},[a("el-row",{staticClass:"search-row",attrs:{gutter:20}},[a("el-col",{staticClass:"align-left",attrs:{span:17}},[a("el-button",{attrs:{type:"primary"},on:{click:t.openAddModal}},[t._v("新增规则")])],1)],1),t._v(" "),a("el-row",{staticClass:"table-row"},[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.wordDataList}},[a("el-table-column",{attrs:{prop:"id",align:"left",label:"主键"}}),t._v(" "),a("el-table-column",{attrs:{prop:"matchCN",align:"left",label:"关系"}}),t._v(" "),a("el-table-column",{attrs:{prop:"total",align:"left",label:"出现次数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"relationCN",align:"left",label:"关联"}}),t._v(" "),a("el-table-column",{attrs:{prop:"enabledCN",align:"left",label:"是否有效"}}),t._v(" "),a("el-table-column",{attrs:{prop:"descriptionCN",align:"left",label:"规则描述"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.openEditModal(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.delWord(e.row.id)}}},[t._v("删除")])]}}])})],1)],1)],1),t._v(" "),a("WorkTablePager",{attrs:{pageCount:t.totalPage},on:{refreshData:t.getTableData}}),t._v(" "),a("el-dialog",{attrs:{title:t.modalPageTitle,visible:t.showModalPage},on:{"update:visible":function(e){t.showModalPage=e}}},[a("el-form",{ref:"editForm",staticClass:"modal-form",attrs:{"label-position":t.left,"label-width":"20%",model:t.formData}},[a("el-form-item",{attrs:{label:"规则描述"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择规则描述"},on:{change:t.ruleDesChange},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}},t._l(t.ruledictList.description,function(e){return a("el-option",{key:e.value,attrs:{change:t.ruleDesChange,label:e.name,value:e.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"关系"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择关系"},model:{value:t.formData.match,callback:function(e){t.$set(t.formData,"match",e)},expression:"formData.match"}},t._l(t.ruledictList.match,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"出现次数"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:"0"==t.formData.description},model:{value:t.formData.total,callback:function(e){t.$set(t.formData,"total",e)},expression:"formData.total"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"关联"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择关联"},model:{value:t.formData.relation,callback:function(e){t.$set(t.formData,"relation",e)},expression:"formData.relation"}},t._l(t.ruledictList.relation,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"是否有效"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"是否有效"},model:{value:t.formData.enabled,callback:function(e){t.$set(t.formData,"enabled",e)},expression:"formData.enabled"}},[a("el-option",{attrs:{label:"是",value:"true"}}),t._v(" "),a("el-option",{attrs:{label:"否",value:"false"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeModal}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.subWordForm()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(c,u,!1,function(t){a("trFd")},"data-v-e0935aa8",null);e.default=f.exports},trFd:function(t,e){}});
//# sourceMappingURL=5.4e68cb22110df7bc61ff.js.map