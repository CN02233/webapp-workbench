webpackJsonp([21],{lQNM:function(t,e){},vs7Y:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("28Pe"),s=a("kzGw"),o={name:"RoleGroup",data:function(){return{dataSourceList:[],ruleList:[],roleGroupList:[],tableDataUrl:"classify/rule",currPageNum:1,totalPage:1,showModalPage:!1,refuseView:!1,isEditModal:!1,editFormData:{task:"任务名称",datasource:"",db:"库名",table:"表名",filed:"文档字段名称",index:"标题名",rule:""},addFormData:{task:"",datasource:"",db:"",table:"",filed:"",index:"",rule:""}}},computed:{ruleData:function(){return this.isEditModal?this.editFormData:this.addFormData},modalPageTitle:function(){return this.isEditModal?"编辑文本规则分类分析":"新建文本规则分类分析"},viewTitle:function(){return"文本规则分类分析"}},components:{WorkTablePager:l.a,WorkMain:s.a},methods:{getTableData:function(t){t&&""!=t?this.currPageNum=t:t=this.currPageNum;var e=this;this.Request({url:this.tableDataUrl,params:{page:t,pagesize:10}}).then(function(t){e.refreshTableList(t.result),e.totalPage=t.total})},refreshTableList:function(t){this.roleGroupList=t},viewResult:function(t){"完成"==t.status?this.$router.push({name:"roleGroupResult",query:{taskId:t.id}}):this.refuseView=!0},addTxtRul:function(){this.showModalPage=!0,this.isEditModal=!1},closeModal:function(){this.showModalPage=!1,this.isEditModal=!1,this.refuseView=!1},subWordForm:function(){var t=this,e=this.addFormData,a="post";this.isEditModal&&(e=this.editFormData,a="put");var l=this;this.Request({url:"classify/rule",method:a,data:e}).then(function(e){"0"!=e.status?t.Message.error(e.message):(t.Message.success("保存成功"),l.getTableData())})},getDataSourceList:function(){var t=this;this.Request({url:"/datasource/list",method:"get"}).then(function(e){"0"!=e.status?t.Message.error(e.message):e.result.forEach(function(e){t.dataSourceList.push({value:e.id,label:e.db})})})},getRuleList:function(){var t=this;this.Request({url:"/rule/list",method:"get"}).then(function(e){"0"!=e.status?t.Message.error(e.message):e.result.forEach(function(e){t.ruleList.push({value:e.id,label:e.group})})})}},mounted:function(){this.getDataSourceList(),this.getRuleList(),this.getTableData(1)}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("WorkMain",{staticClass:"table-page-root",attrs:{headerItems:["NLP基础","规则分类"]}},[a("el-row",{staticClass:"search-row",attrs:{gutter:20}},[a("el-col",{staticClass:"align-left",attrs:{span:17}},[a("el-button",{attrs:{type:"primary"},on:{click:t.addTxtRul}},[t._v("新增文本规则分类分析")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.getTableData()}}},[t._v("刷新")])],1)],1),t._v(" "),a("el-row",{staticClass:"table-row"},[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.roleGroupList}},[a("el-table-column",{attrs:{prop:"task",align:"left",label:"任务名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"start",align:"left",label:"开始时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"end",align:"left",label:"结束时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",align:"left",label:"执行状态"}}),t._v(" "),a("el-table-column",{attrs:{label:"分析结果",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.viewResult(e.row)}}},[t._v("查看结果")])]}}])})],1)],1)],1),t._v(" "),a("WorkTablePager",{attrs:{pageCount:t.totalPage},on:{refreshData:t.getTableData}}),t._v(" "),a("el-dialog",{attrs:{title:t.modalPageTitle,visible:t.showModalPage},on:{"update:visible":function(e){t.showModalPage=e}}},[a("el-form",{staticClass:"modal-form",attrs:{"label-position":t.left,"label-width":"20%",model:t.ruleData}},[a("el-form-item",{attrs:{label:"任务名称"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.ruleData.task,callback:function(e){t.$set(t.ruleData,"task",e)},expression:"ruleData.task"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"数据源"}},[a("el-select",{staticClass:"select-ty",attrs:{placeholder:"请选择数据源"},model:{value:t.ruleData.datasource,callback:function(e){t.$set(t.ruleData,"datasource",e)},expression:"ruleData.datasource"}},t._l(t.dataSourceList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"库名"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.ruleData.db,callback:function(e){t.$set(t.ruleData,"db",e)},expression:"ruleData.db"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"表名"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.ruleData.table,callback:function(e){t.$set(t.ruleData,"table",e)},expression:"ruleData.table"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"文档字段名"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.ruleData.filed,callback:function(e){t.$set(t.ruleData,"filed",e)},expression:"ruleData.filed"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"标题段名"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.ruleData.index,callback:function(e){t.$set(t.ruleData,"index",e)},expression:"ruleData.index"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分类规则组"}},[a("el-select",{staticClass:"select-ty",attrs:{placeholder:"请选择分类规则组"},model:{value:t.ruleData.rule,callback:function(e){t.$set(t.ruleData,"rule",e)},expression:"ruleData.rule"}},t._l(t.ruleList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeModal}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.subWordForm(),t.closeModal()}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.viewTitle,visible:t.refuseView},on:{"update:visible":function(e){t.refuseView=e}}},[a("span",[t._v("任务正在后台运行，请关注结果页面查看分析结果！")]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeModal}},[t._v("取 消")])],1)])],1)},staticRenderFns:[]};var i=a("VU/8")(o,r,!1,function(t){a("lQNM")},"data-v-7d3ea040",null);e.default=i.exports}});
//# sourceMappingURL=21.89d12cb1a8013e694cf1.js.map